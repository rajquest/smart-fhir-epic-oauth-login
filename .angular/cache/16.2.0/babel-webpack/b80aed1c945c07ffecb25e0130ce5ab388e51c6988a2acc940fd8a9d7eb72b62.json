{"ast":null,"code":"module.exports = function (h) {\n  return function (args) {\n    try {\n      return h(args);\n    } catch (e) {\n      if (args.debug) {\n        console.log(\"\\nDEBUG: (ERROR in middleware)\");\n        console.log(e.message);\n        console.log(e.stack);\n      }\n      if (!args.defer) {\n        console.log(\"\\nDEBUG: (ERROR in middleware)\");\n        console.log(e.message);\n        console.log(e.stack);\n        throw new Error(\"I need adapter.defer\");\n      }\n      var deff = args.defer();\n      deff.reject(e);\n      return deff.promise;\n    }\n  };\n};","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}